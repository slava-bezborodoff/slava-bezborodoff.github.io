!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],n);else{var t="object"==typeof exports?n(require("lodash")):n(e._);for(var o in t)("object"==typeof exports?exports:e)[o]=t[o]}}(window,(function(e){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=12)}([function(e,n,t){"use strict";t.r(n),t.d(n,"promiseApplied",(function(){return r})),t.d(n,"runInContext",(function(){return a})),t.d(n,"isOperationAllowedInContext",(function(){return p})),t.d(n,"waitForChangesApplied",(function(){return i}));var o=t(2),r=function(e,n){return new Promise((function(t){e.waitForChangesApplied((function(){return t(n)}))}))},i=function(e,n){return e.waitForChangesApplied(n)},a=function(e,n,t){return n.runInContext(e,t)},p=function(e,n){return!!Object(o.isExtensionContext)(e)||n===e.appDefinitionId}},function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resolveOption=n.isExtensionContext=void 0;const o=t(4);n.isExtensionContext=e=>e.context===o.SDK_CONTEXT.EXTENSION,n.resolveOption=function(e,t,o,{isRequired:r}={isRequired:!1}){const i=n.isExtensionContext(e)?null==t?void 0:t[o]:null==e?void 0:e[o];if(r&&void 0===i)throw new Error(`option ${o} is required`);return i}},function(e,n,t){e.exports=t(8)},function(e,n,t){"use strict";t.r(n),t.d(n,"REGISTER_ERROR",(function(){return o})),t.d(n,"SDK_CONTEXT",(function(){return r}));var o="registerError_",r=Object.freeze({EXTENSION:"extension",DEFAULT:"default"})},function(e,n){function t(e,n,t,o,r,i,a){try{var p=e[i](a),u=p.value}catch(e){return void t(e)}p.done?n(u):Promise.resolve(u).then(o,r)}e.exports=function(e){return function(){var n=this,o=arguments;return new Promise((function(r,i){var a=e.apply(n,o);function p(e){t(a,r,i,p,u,"next",e)}function u(e){t(a,r,i,p,u,"throw",e)}p(void 0)}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t(0);n.default={get:function(e,n,t,{componentRef:o}){return e.responsiveLayout.get(o)},update:function(e,n,t,{componentRef:r,responsiveLayout:i}){o.runInContext(n.appDefinitionId,e,()=>e.responsiveLayout.update(r,i))}}},,function(e,n,t){var o=function(e){"use strict";var n=Object.prototype,t=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function p(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{p({},"")}catch(e){p=function(e,n,t){return e[n]=t}}function u(e,n,t,o){var r=n&&n.prototype instanceof f?n:f,i=Object.create(r.prototype),a=new w(o||[]);return i._invoke=function(e,n,t){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return R()}for(t.method=r,t.arg=i;;){var a=t.delegate;if(a){var p=C(a,t);if(p){if(p===s)continue;return p}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===o)throw o="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);o="executing";var u=c(e,n,t);if("normal"===u.type){if(o=t.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:t.done}}"throw"===u.type&&(o="completed",t.method="throw",t.arg=u.arg)}}}(e,t,a),i}function c(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s={};function f(){}function d(){}function l(){}var g={};g[r]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(D([])));v&&v!==n&&t.call(v,r)&&(g=v);var I=l.prototype=f.prototype=Object.create(g);function h(e){["next","throw","return"].forEach((function(n){p(e,n,(function(e){return this._invoke(n,e)}))}))}function y(e,n){var o;this._invoke=function(r,i){function a(){return new n((function(o,a){!function o(r,i,a,p){var u=c(e[r],e,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&t.call(f,"__await")?n.resolve(f.__await).then((function(e){o("next",e,a,p)}),(function(e){o("throw",e,a,p)})):n.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,p)}))}p(u.arg)}(r,i,o,a)}))}return o=o?o.then(a,a):a()}}function C(e,n){var t=e.iterator[n.method];if(void 0===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,C(e,n),"throw"===n.method))return s;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var o=c(t,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,s;var r=o.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,s):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,s)}function b(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function O(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function D(e){if(e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(t.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=void 0,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=I.constructor=l,l.constructor=d,d.displayName=p(l,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===d||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,p(e,a,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},h(y.prototype),y.prototype[i]=function(){return this},e.AsyncIterator=y,e.async=function(n,t,o,r,i){void 0===i&&(i=Promise);var a=new y(u(n,t,o,r),i);return e.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},h(I),p(I,a,"Generator"),I[r]=function(){return this},I.toString=function(){return"[object Generator]"},e.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=D,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(t,o){return a.type="throw",a.arg=e,n.next=t,o&&(n.method="next",n.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var p=t.call(i,"catchLoc"),u=t.call(i,"finallyLoc");if(p&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(p){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&t.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=n,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),s},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),O(t),s}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var o=t.completion;if("throw"===o.type){var r=o.arg;O(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:D(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=o}catch(e){Function("r","regeneratorRuntime = r")(o)}},,,,function(e,n,t){"use strict";t.r(n),t.d(n,"waitForChangesApplied",(function(){return i.waitForChangesApplied})),t.d(n,"save",(function(){return J})),t.d(n,"initAutosave",(function(){return Q})),t.d(n,"application",(function(){return p})),t.d(n,"components",(function(){return u})),t.d(n,"controllers",(function(){return g})),t.d(n,"history",(function(){return v})),t.d(n,"info",(function(){return I})),t.d(n,"language",(function(){return h})),t.d(n,"menu",(function(){return D})),t.d(n,"pages",(function(){return P})),t.d(n,"pagesGroup",(function(){return j})),t.d(n,"routers",(function(){return T})),t.d(n,"siteSegments",(function(){return S})),t.d(n,"siteMembers",(function(){return N})),t.d(n,"fonts",(function(){return m})),t.d(n,"theme",(function(){return F})),t.d(n,"tpa",(function(){return G})),t.d(n,"vfs",(function(){return B})),t.d(n,"mobile",(function(){return W})),t.d(n,"responsiveLayout",(function(){return U.a})),t.d(n,"accessibility",(function(){return V})),t.d(n,"account",(function(){return H})),t.d(n,"errors",(function(){return X})),t.d(n,"wixapps",(function(){return K})),t.d(n,"environment",(function(){return Y})),t.d(n,"transactions",(function(){return $}));var o=t(1),r=t.n(o),i=t(0),a=t(2);var p={install:function(e,n,t,o){var a=o.appDefinitionId,p=o.originInfo,u=o.editorType,c=o.sourceTemplateId,s=o.isSilent;return new Promise((function(t,o){if(a){var f={appDefinitionId:r.a.get(n,"appDefinitionId")},d=p?r.a.assign({},p,f):f,l={origin:{initiator:"APP",type:u,info:d}};c&&(l.sourceTemplateId=c),s&&(l.isSilent=!0),Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.provision(a,l).then(t,o)}))}else o(new Error("options must contain appDefinitionId"))}))},uninstall:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.appDefinitionId;return new Promise((function(t){var o=Object(a.resolveOption)(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!0});Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.uninstall(o)})),e.waitForChangesApplied(t)}))},registerToCustomEvents:function(e,n,t,o){var r=o.eventTypes,p=o.applicationId,u=Object(a.resolveOption)(n,{applicationId:p},"applicationId",{isRequired:!0});return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.registerAppToCustomEvents(u,r)}))},appStudioWidgets:{changeVariation:function(e,n,t,o){var r=o.componentRef,a=o.variationId;return new Promise((function(t){Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.appStudioWidgets.changeVariation(r,a,t)}))}))},changePreset:function(e,n,t,o){var r=o.componentRef,a=o.stylePresetId,p=o.layoutPresetId;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.appStudioWidgets.changePreset(r,a,p)}))},addWidget:function(e,n,t,o){var r=o.containerRef,p=o.widgetId,u=o.variationId,c=o.layout,s=o.installationType,f=o.appDefinitionId;return new Promise((function(t,o){var d=Object(a.resolveOption)(n,{appDefinitionId:f},"appDefinitionId",{isRequired:!0});Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.appStudioWidgets.addWidget(d,p,{containerRef:r,variationId:u,layout:c,installationType:s,onSuccess:t,onError:o})}))}))}},sessionState:{update:function(e,n,t,o){var r=o.stateMap;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.sessionState.update(r)})),Object(i.promiseApplied)(e)}},livePreview:{refresh:function(e,n,t,o){var r=o.source,i=o.shouldFetchData,p=o.appDefinitionId,u=Object(a.resolveOption)(n,{appDefinitionId:p},"appDefinitionId",{isRequired:!0});return e.platform.livePreview.refresh({apps:[u],source:r||"EditorSDK",shouldFetchData:i})}}};var u={add:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.componentDefinition,p=o.pageRef,u=o.customId,c=o.optionalIndex;return new Promise((function(t,o){r.a.has(a,"componentType")||o(new Error("componentDefinition must contain componentType"));var s=e.components.buildDefaultComponentStructure(a.componentType);r.a.merge(s,a),t(Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.add(p,s,u,c)})))}))},addAndAdjustLayout:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.componentDefinition,p=o.pageRef,u=o.customId,c=o.optionalIndex;return new Promise((function(t,o){r.a.has(a,"componentType")||o(new Error("componentDefinition must contain componentType"));var s=e.components.buildDefaultComponentStructure(a.componentType);r.a.merge(s,a);var f=Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.addAndAdjustLayout(p,s,u,c)}));Object(i.waitForChangesApplied)(e,(function(){return t(f)}))}))},remove:function(e,n,t,o){var r=o.componentRef;e.viewMode.get()===e.viewMode.VIEW_MODES.MOBILE?Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.mobile.hiddenComponents.hide(r)})):Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.remove(r)}))},get:function(e,n,t,o){var i=o.componentRefs,p=o.properties,u=void 0===p?[]:p,c=o.applicationId,s=r.a.compact(r.a.isArray(i)?i:[i]);return r.a.transform(s,(function(t,o){var i={componentRef:o},p=!u.includes("components"),s=e.components.serialize(o,null,p);if(r.a.assign(i,r.a.pick(s,u)),r.a.includes(u,"sdkType")&&(i.sdkType=e.wixCode.getCompSdkType(o)),r.a.includes(u,"connections")&&(i.connections=e.platform.controllers.connections.get(o)),r.a.includes(u,"style")&&(i.style=e.components.style.get(o)),r.a.includes(u,"role")){var f=e.platform.controllers.connections.get(o),d=Object(a.resolveOption)(n,{applicationId:c},"applicationId",{isRequired:!0}),l=r.a.find(f,(function(n){return r.a.get(e.components.data.get(n.controllerRef),"applicationId")===d}));i.role=r.a.get(l,"role")}t.push(i)}),[])},serialize:function(e,n,t,o){var r=o.componentRef,i=o.maintainIdentifiers,a=void 0!==i&&i;return e.components.serialize(r,null,!1,a)},migrate:function(e,n,t,o){var r=o.componentRef,i=o.componentDefinition;return e.components.migrate(r,i)},getAllComponents:function(e){return e.components.getAllComponents()},getPage:function(e,n,t,o){var r=o.componentRef;return e.components.getPage(r)},getById:function(e,n,t,o){var r=o.id;return e.components.get.byId(r)},getChildren:function(e,n,t,o){var r=o.componentRef,i=o.recursive,a=void 0!==i&&i,p=o.fromDocument;return(void 0!==p&&p?e.components.getChildrenFromFull:e.components.getChildren)(r,a)},getAncestors:function(e,n,t,o){var r=o.componentRef;return e.components.getAncestors(r)},getType:function(e,n,t,o){var r=o.componentRef;return e.components.getType(r)},isFullWidth:function(e,n,t,o){var r=o.componentRef;if(!r)throw new Error("options must include componentRef property");return e.components.is.fullWidth(r)},setFullWidth:function(e,n,t,o){var r=o.componentRef,a=o.fullWidth,p=o.margins;if(!r)throw new Error("options must include componentRef property");if("boolean"!=typeof a)throw new Error("options must include fullWidth boolean property");return new Promise((function(n){if(a){var t=p||{},o=t.left,u=t.right,c={left:Object.assign({vw:0},o),right:Object.assign({vw:0},u)};e.components.layout.setDock(r,c)}else e.components.layout.unDock(r);Object(i.waitForChangesApplied)(e,n)}))},behaviors:{getRuntimeState:function(e,n,t,o){var r=o.componentRef;return e.components.behaviors.getRuntimeState(r)},execute:function(e,n,t,o){var r=o.componentRef,a=o.behaviorName,p=o.behaviorParams;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.behaviors.execute(r,a,p)})),Object(i.promiseApplied)(e)},get:function(e,n,t,o){var r=o.componentRef;return e.components.behaviors.get(r)},update:function(e,n,t,o){var r=o.componentRef,i=o.behavior;return e.components.behaviors.update(r,i)},remove:function(e,n,t,o){var r=o.componentRef,i=o.behaviorName,a=o.actionName;return e.components.behaviors.remove(r,i,a)}},properties:{get:function(e,n,t,o){var r=o.componentRef;return e.components.properties.get(r)},update:function(e,n,t,o){var r=o.componentRef,a=o.props;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.properties.update(r,a)}))}},data:{get:function(e,n,t,o){var r=o.componentRef;return e.components.data.get(r)},update:function(e,n,t,o){var r=o.componentRef,a=o.data;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.data.update(r,a)}))},updateInLanguage:function(e,n,t,o){var r=o.componentRef,a=o.data,p=o.languageCode;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.data.updateInLang(r,a,p)}))}},layout:{get:function(e,n,t,o){var r=o.componentRef;return e.components.layout.get(r)},update:function(e,n,t,o){var r=o.componentRef,a=o.layout;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.layout.update(r,a)}))}},style:{get:function(e,n,t,o){var r=o.componentRef;return e.components.style.get(r)},update:function(e,n,t,o){var r=o.componentRef,a=o.style;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.style.setCustom(r,null,a)}))},updateFull:function(e,n,t,o){var r=o.componentRef,a=o.style;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.style.update(r,a)}))}},stylable:{update:function(e,n,t,o){var r=o.componentRef,a=o.style;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.stylable.update(r,a)}))}},design:{get:function(e,n,t,o){var r=o.componentRef;return e.components.design.get(r)},update:function(e,n,t,o){var r=o.componentRef,a=o.designItem,p=o.design,u=o.retainCharas;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.design.update(r,p||a,u)}))}},modes:{showComponentOnlyOnPagesGroup:function(e,n,t,o){var r=o.componentPointer,a=o.componentRef,p=void 0===a?r:a,u=o.pagesGroupPointer;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.showComponentOnlyOnPagesGroup(p,u)}))},activateComponentMode:function(e,n,t,o){var r=o.componentRef,a=o.modeId;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.activateComponentMode(r,a)}))},applyCurrentToAllModes:function(e,n,t,o){var r=o.componentRef;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.applyCurrentToAllModes(r)}))},getModes:function(e,n,t,o){var r=o.componentRef;return e.components.modes.getModes(r)}},arrangement:{moveToIndex:function(e,n,t,o){var r=o.componentRef,a=o.index;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.arrangement.moveToIndex(r,a)}))},getIndex:function(e,n,t,o){var r=o.componentRef;if(!r)throw new Error("options must include componentRef property");return e.components.arrangement.getCompIndex(r)}},refComponents:{removeAllOverrides:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){if("wysiwyg.viewer.components.RefComponent"===e.components.getType(r))if(Object(i.isOperationAllowedInContext)(n,e.components.data.get(r).appDefinitionId)){try{Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.removeAllOverrides(r)}))}catch(e){o(e)}t()}else o("The component with id '".concat(r.id,"' doesn't belong to this app."));else o("This method remove overrides only for a refComponent.")}))},openReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){if("wysiwyg.viewer.components.RefComponent"===e.components.getType(r))if(Object(i.isOperationAllowedInContext)(n,e.components.data.get(r).appDefinitionId)){try{Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.openReferredComponent(r)}))}catch(e){o(e)}t()}else o("The component with id '".concat(r.id,"' doesn't belong to this app."));else o("This method only opens a refComponent.")}))},closeWidgetToReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){if("platform.components.AppWidget"===e.components.getType(r))if(Object(i.isOperationAllowedInContext)(n,e.components.data.get(r).appDefinitionId))try{t(Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.closeWidgetToReferredComponent(r)})))}catch(e){o(e)}else o("The component with id '".concat(r.id,"' doesn't belong to this app."));else o("This method closes only appWidget")}))},getAllAppRefComponents:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.appDefinitionId,i=e.components.getAllComponentsFromFull(),p=Object(a.resolveOption)(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!0});return i.filter((function(n){var t=e.components.data.get(n)||{};return"WidgetRef"===t.type&&t.appDefinitionId===p}))},isRefComponentCollapsed:function(e,n,t,o){var i=o.componentRef;return"COLLAPSED"===r.a.get(e.components.properties.get(i),"ghost")},getCollapsedRefComponents:function(e,n,t,o){var a=o.componentRef;return new Promise((function(t,o){if("wysiwyg.viewer.components.RefComponent"===e.components.getType(a))if(Object(i.isOperationAllowedInContext)(n,e.components.data.get(a).appDefinitionId))try{var p=e.components.refComponents.getAllGhostRefComponentsPrimaryConnection(a);t(r.a.map(p,(function(n,t){return{componentRef:e.components.get.byId(t),role:n.role}})))}catch(e){o(e)}else o("The component with id '".concat(a.id,"' doesn't belong to this app."));else o("This method get collapsed components only for a refComponent.")}))},collapseReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){if(!e.components.refComponents.isReferredComponent(r))return o("The component with id '".concat(r.id,"' isn't a referred component."));var a=e.components.refComponents.getRefHostCompPointer(r);if(!Object(i.isOperationAllowedInContext)(n,e.components.data.get(a).appDefinitionId))return o("The component with id '".concat(r.id,"' doesn't belong to this app."));try{Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.remove(r)}))}catch(e){return o(e)}t()}))},getTemplateComponent:function(e,n,t,o){var r=o.componentRef;return e.components.refComponents.getTemplateCompPointer(r)},expandReferredComponent:function(e,n,t,o){var r=o.componentRef;return new Promise((function(t,o){if(!e.components.refComponents.isReferredComponent(r))return o("The component with id '".concat(r.id,"' isn't a referred component."));var a=e.components.refComponents.getRefHostCompPointer(r);if(!Object(i.isOperationAllowedInContext)(n,e.components.data.get(a).appDefinitionId))return o("The component with id '".concat(r.id,"' doesn't belong to this app."));try{Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.unGhostifyComponent(r)}))}catch(e){return o(e)}t()}))}}},c={SITE_HEADER:!0,SITE_FOOTER:!0};var s=function(e,n){return r()(n).thru(e.components.getAncestors).reverse().tail().map("id").head()};function f(e,n,t,o){var r=n.appDefinitionId,i=t?t.id:null,a=function(n){return!i||!e.pages.popupPages.isPopup(i)||"masterPage"!==e.components.getPage(n).id};return e.components.getAllComponents(i,(function(n){var t=e.components.getType(n);return function(e){return"platform.components.AppController"===e||"platform.components.AppWidget"===e}(t)&&e.components.data.get(n).applicationId===r&&a(n)||o&&e.tpa.isTpaByCompType(t)&&e.components.data.get(n).appDefinitionId===r&&a(n)}))}function d(e,n,t,o){var i=f(e,n,t,o),a=r()(i).map(e.components.refComponents.getTemplateCompPointer).compact().keyBy("id").value();return r()(i).reject((function(e){var n=e.id;return a[n]})).map((function(e){return{controllerRef:e}})).value()}function l(e,n,t,o){var r=o.controllerRef;return e.platform.controllers.connections.getControllerConnections(r)}var g={listControllers:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.pageRef,i=void 0===r?e.pages.getFocusedPage():r,p=o.appDefinitionId,u=o.includeTPAWidget,c={appDefinitionId:Object(a.resolveOption)(n,{appDefinitionId:p},"appDefinitionId",{isRequired:!0})};return d(e,c,i,u)},listAllControllers:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.appDefinitionId,i=o.includeTPAWidget,p={appDefinitionId:Object(a.resolveOption)(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!0})};return d(e,p,null,i)},listConnectableControllers:function(e,n,t,o){var i=o.componentRef,p=o.appDefinitionId,u=o.includeTPAWidget,d=e.components.getPage(i),l={appDefinitionId:Object(a.resolveOption)(n,{appDefinitionId:p},"appDefinitionId",{isRequired:!0})},g=f(e,l,d,u),m=s(e,i);return r()(g).filter((function(n){return function(e,n,t,o){var r=e.components.getPage(o);if("masterPage"===r.id){var i=s(e,o);return!(i&&!c[i])||t===i}return n===r.id}(e,r.a.get(d,"id"),m,n)})).filter((function(n){return function(e,n,t){return"platform.components.AppWidget"!==e.components.getType(t)||e.components.isDescendantOfComp(n,t)}(e,i,n)})).map((function(e){return{controllerRef:e}})).value()},getControllerConnections:l,listControllerConnections:l,listConnections:function(e,n,t,o){var i=o.componentRef,a=e.platform.controllers.connections.get(i);return r.a.reject(a,{type:"WixCodeConnectionItem"})},listConnectedComponents:function(e,n,t,o){var r=o.controllerRef;return e.platform.controllers.connections.getConnectedComponents(r)},connect:function(e,n,t,o){var r=o.connectToRef,a=o.controllerRef,p=o.role,u=o.connectionConfig,c=o.isPrimary,s=o.subRole;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.connections.connect(r,a,p,u,c,s)})),{connectToRef:r,controllerRef:a,role:p,subRole:s}},disconnect:function(e,n,t,o){var r=o.connectToRef,a=o.controllerRef,p=o.role;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.connections.disconnect(r,a,p)}))},getData:function(e,n,t,o){var i=o.controllerRef,a=e.tpa.isTpaByCompType(e.components.getType(i)),p=e.components.data.get(i);if(a)return function(e,n){var t=n.controllerRef,o=n.compData,r={};e.tpa.data.getPublicData(o.applicationId,t,(function(e){if(e.error)throw new Error(e.error);r=e}));var i=e.platform.controllers.getName(t);return{type:o.widgetId,config:r.COMPONENT,displayName:i}}(e,{controllerRef:i,compData:p});var u=e.platform.controllers.settings.get(i);return{type:r.a.get(p,"controllerType"),config:u,displayName:e.platform.controllers.getName(i)}},saveConfiguration:function(e,n,t,o){var r=o.controllerRef,a=o.config,p=e.components.getType(r);return e.tpa.isTpaByCompType(p)?new Promise((function(t,o){return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.data.setMultiple(r,a,"COMPONENT",(function(e){return e.error?o(new Error(e.error.message)):t(e)}))}))})):Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.settings.set(r,a)}))},setDisplayName:function(e,n,t,o){var r=o.controllerRef,a=o.name;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.setName(r,a)}))},setState:function(e,n,t,o){var r=o.state;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.setState(r)}))},setExternalId:function(e,n,t,o){var r=o.controllerRef,a=o.externalId;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.settings.setExternalId(r,a)}))},getExternalId:function(e,n,t,o){var r=o.controllerRef;return e.platform.controllers.settings.getExternalId(r)}};var m={getFontsOptions:function(e){return e.fonts.getFontsOptions()}};var v={add:function(e,n,t,o){var r=o.label;return new Promise((function(n){return Object(i.waitForChangesApplied)(e,(function(){e.history.add(r),n()}))}))}};var I={getSiteId:function(e){return e.generalInfo.getSiteId()},getMetaSiteId:function(e){return e.generalInfo.getMetaSiteId()},getPublicUrl:function(e){return e.generalInfo.getPublicUrl()},isSitePublished:function(e){return e.generalInfo.isSitePublished()},getLanguage:function(e){return e.generalInfo.getLanguage()},getRegionalLanguage:function(e){return e.generalInfo.getRegionalLanguage()},isSiteSaved:function(e){return!e.generalInfo.isFirstSave()&&!e.generalInfo.isDraft()},isHttpsEnabled:function(e){return e.generalInfo.isHttpsEnabled()},getAppInstance:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.applicationId,i=Object(a.resolveOption)(n,{applicationId:r},"applicationId",{isRequired:!0}),p="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().applicationId:i;return e.tpa.app.getData(p).instance},getAppInstanceId:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.applicationId,i=Object(a.resolveOption)(n,{applicationId:r},"applicationId",{isRequired:!0}),p="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().applicationId:i;return e.tpa.app.getData(p).instanceId},getCurrency:function(e){return e.generalInfo.getCurrency()},getTimeZone:function(e){return e.generalInfo.getTimeZone()},getUserId:function(e){return e.generalInfo.getUserInfo().userId},getUserInfo:function(e){return e.generalInfo.getUserInfo()},getVendorProductId:function(e,n,t,o){var i=r.a.get(o,"appDefinitionId");if(!i&&Object(a.isExtensionContext)(n))throw new Error("options must contain appDefinitionId");var p=i?e.platform.getAppDataByAppDefId(i):e.platform.getAppDataByApplicationId(n.applicationId);return r.a.get(p,"vendorProductId")},getRegion:function(e){return e.generalInfo.getLocale()},getArtifactsUrls:function(e,n,t){return e.generalInfo.getArtifactsUrl(t)},getSiteDisplayName:function(e){return e.siteDisplayName.get()},getStageViewMode:function(e){return e.documentMode.getComponentViewMode()},getSiteMap:function(e){return e.tpa.getSiteMap()},getUserGEO:function(e){return e.generalInfo.getGeo()}};var h={add:function(e,n,t,o){var r=o.languageCode;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.language.add(r)})),Object(i.promiseApplied)(e)},current:{set:function(e,n,t,o){var r=o.languageCode;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.language.current.set(r)}))}},component:{getTranslations:function(e,n,t,o){var r=o.componentRef;return e.language.component.getTranslations(r)}},original:{get:function(e){return e.language.original.get()}},setLanguages:function(e,n){return e.language.init(n)},getTranslationLanguages:function(e){return e.language.getFull()},autoTranslate:function(){throw new Error("not implemented for this editor")},multilingual:{isEnabled:function(e){return e.language.multilingual.isEnabled()}}},y=t(3),C=t.n(y),b=t(5),O=t.n(b),w=["MEMBERS_SUB_MENU","MEMBERS_LOGIN_MENU","MEMBERS_LOGIN_ICONS_MENU","CUSTOM_MAIN_MENU","CUSTOM_MENU"];var D={create:function(e,n,t,o){var p=o.menuData,u=o.customId,c=o.applicationId,s=Object(a.resolveOption)(n,{applicationId:c},"applicationId",{isRequired:!0}),f=r.a.assign({appId:s},p);return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.menu.create(f,u)}))},connect:function(e,n,t,o){var r=o.menuCompPointer,a=o.menuId;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.menu.connect(r,a)}))},update:function(e,n,t,o){var r=o.menuId,a=o.menuData;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.menu.update(r,a)}))},remove:function(e,n,t,o){var r=o.menuId;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.menu.remove(r)}))},addItem:function(e,n,t,o){var r=o.menuId,a=o.menuItem;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.menu.addItem(r,a)}))},getById:function(e,n,t,o){var r=o.menuId;return e.menu.getById(r)},getDefaultMenuId:function(e,n){return Object(i.runInContext)(n.appDefinitionId,e,O()(C.a.mark((function n(){var t,o,r,i;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.menu.getAll();case 2:if(t=n.sent,0!==(o=t.filter((function(e){return!w.includes(e.id)}))).length){n.next=6;break}return n.abrupt("return",null);case 6:return r=o.find((function(e){return"MAIN_MENU"===e.menuType})),i=o[0],n.abrupt("return",(r||i).id);case 9:case"end":return n.stop()}}),n)}))))}};function R(e,n,t,o,a){var p=o.pageRef,u=o.pageLink,c=r.a.get(p,"id")||u;if(c)return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.navigateTo(c)})),Object(i.promiseApplied)(e,a)}function x(e,n,t,o){var r=o.pageRef;return e.pages.data.get(r.id)}var P={navigateTo:R,setState:function(e,n,t,o){var r=o.state;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.platform.pages.setState(r)}))},getCurrent:function(e){return e.pages.getReference(e.pages.getFocusedPageId())},getPrimary:function(e){return e.pages.getReference(e.pages.getPrimaryPageId())},getHomePage:function(e){var n=e.homePage.get();return e.components.get.byId(n)},add:function(e,n,t,o){var r=o.title,a=o.definition,p=o.shouldAddMenuItem,u=o.shouldNavigateToPage,c=void 0===u||u,s=Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.add(r,a,p)}));return c?R(e,n,0,{pageRef:s},s):s},getPageData:x,isDynamicPage:function(e,n,t,o){var r=o.pageRef,i=e.routers.getRouterRef.byPage(r);return Boolean(i)},rename:function(e,n,t,o){var r=o.pageRef,a=o.title;return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.data.update(r.id,{title:a})}))},data:{get:x,getAll:function(e){return e.pages.getPagesData()},update:function(e,n,t,o){var r=o.pageRef,a=o.data;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.data.update(r.id,a)}))}},pageUriSEO:{convertPageNameToUrl:function(e,n,t,o){var r=o.title;return e.pages.data.pageUriSEO.convertPageNameToUrl(r)}},serialize:function(e,n,t,o){var r=o.pageRef,i=o.maintainIdentifiers,a=void 0!==i&&i;return e.pages.serialize(r.id,a)},permissions:{hasPassword:function(e,n,t,o){var r=o.pageRef;return e.pages.permissions.hasPassword(r.id)},updatePagePassword:function(e,n,t,o){var r=o.pageRef,a=o.plainPassword;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.updatePassword(r.id,a)}))},removePagePassword:function(e,n,t,o){var r=o.pageRef;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.removePassword(r.id)}))},duplicatePagePassword:function(e,n,t,o){var r=o.destinationPageRef,a=o.sourcePageRef;return new Promise((function(t,o){Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.duplicatePagePassword(r.id,a.id,t,o)}))}))},duplicateGroupsPermissions:function(){return new Promise((function(e){e()}))}},remove:function(e,n,t,o){var r=o.pageRef;return new Promise((function(t,o){var a=e.pages.data.get(r.id);if(a)if(Object(i.isOperationAllowedInContext)(n,a.managingAppDefId))if(e.pages.getCurrentPage().id!==r.id){var p=e.homePage.get();if(r.id!==p)if(a.tpaApplicationId)o("It is not allowed to delete a section page '(".concat(r.id,")'"));else{try{Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.remove(r.id)}))}catch(e){return void o(e)}t()}else o("It is not allowed to delete homePage (".concat(r.id,"), please set a new page as homePage and try again"))}else o("It is not allowed to delete current page (".concat(r.id,"), please navigate to another page"));else o("page with id '".concat(r.id,"' can not be deleted. page is not managed by this application"));else o("page with id '".concat(r.id,"' doesn't exist"))}))},getApplicationPages:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.appDefinitionId,i=Object(a.resolveOption)(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!1});return i?e.pages.getPagesData().filter((function(e){return e.managingAppDefId===i})):[]},popupPages:{add:function(e,n,t,o){var r=o.title,a=o.definition,p=o.shouldNavigateToPage,u=void 0===p||p,c=Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.add(r,a)}));return u?R(e,n,0,{pageRef:c},c):c},addConnected:function(e,n,t,o){var p=o.title,u=o.definition,c=o.controllerType,s=o.popupRole,f=o.shouldNavigateToPage,d=void 0===f||f,l=o.appDefinitionId;return new Promise((function(t){Object(i.runInContext)(n.appDefinitionId,e,(function(){var o=e.pages.popupPages.add(p,u),f=Object(a.resolveOption)(n,{appDefinitionId:l},"appDefinitionId",{isRequired:!0}),g=r.a.defaultsDeep({data:{controllerType:c,name:c,applicationId:f}},e.components.buildDefaultComponentStructure("platform.components.AppController")),m=e.components.add(o,g);Object(i.waitForChangesApplied)(e,(function(){var r=e.components.getChildren(o);e.platform.controllers.connections.connect(r[0],m,s,{},!0),t(d?R(e,n,0,{pageRef:o},o):o)}))}))}))},open:function(e,n,t,o){var a=o.popupRef,p=r.a.get(a,"id");p&&Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.open(p)}))},close:function(e,n){Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.close()}))},isPopupOpened:function(e){return e.pages.popupPages.isPopupOpened()},getApplicationPopups:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.appDefinitionId,i=Object(a.resolveOption)(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!1});return i?e.pages.popupPages.getDataList().filter((function(e){return e.managingAppDefId===i})):[]}}};var j={create:function(e,n,t,o){var r=o.groupName,p=o.applicationId,u=Object(a.resolveOption)(n,{applicationId:p},"applicationId",{isRequired:!0}),c=Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.create({groupName:r,appId:u})}));return Promise.resolve(c)},addPageToPagesGroup:function(e,n,t,o){var r=o.pagesGroupPointer,a=o.pageId;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.addPageToPagesGroup(r,a)}))},getById:function(e,n,t,o){var r=o.pagesGroupId;return e.pagesGroup.getById(r)},getByGroupName:function(e,n,t,o){var r=o.groupName;return e.pagesGroup.getByGroupName(r)},getAll:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.applicationId,i=Object(a.resolveOption)(n,{applicationId:r},"applicationId",{isRequired:!0});return e.pagesGroup.getAll(i)},remove:function(e,n,t,o){var r=o.pagesGroupPointer;Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.remove(r)}))}};function E(e,n,t,o){var a=o.routerRef,p=e.routers.get.byRef(a);if(p&&Object(i.isOperationAllowedInContext)(n,p.appDefinitionId))return{id:p.id,prefix:p.prefix,config:p.config,pages:r()(p.pages).invertBy().map((function(n,t){return{pageRef:e.pages.getReference(t),pageRoles:n}})).value()}}function A(e,n,t,o){var r=o.prefix,a=e.routers.getRouterRef.byPrefix(r);if(!a)return a;var p=e.routers.get.byRef(a);return p&&Object(i.isOperationAllowedInContext)(n,p.appDefinitionId)?a:void 0}var T={add:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.prefix,p=o.config,u=o.group,c=o.appDefinitionId;return new Promise((function(t){var o={appDefinitionId:Object(a.resolveOption)(n,{appDefinitionId:c},"appDefinitionId",{isRequired:!0}),prefix:r,config:p};u&&(o.group=u),t(Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.routers.add(o)})))}))},remove:function(e,n,t,o){var r=o.routerRef,a=e.routers.get.byRef(r);a&&Object(i.isOperationAllowedInContext)(n,a.appDefinitionId)&&Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.routers.remove(r)}))},get:E,getAll:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId,p=Object(a.resolveOption)(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!0});return r.a.map(e.routers.get.byApp(p),(function(o){var r=o.prefix,i=A(e,n,t,{prefix:r});return E(e,n,0,{routerRef:i})}))},update:function(e,n,t,o){var r=o.routerRef,a=o.prefix,p=o.config;return new Promise((function(t,o){var u=e.routers.get.byRef(r);u&&Object(i.isOperationAllowedInContext)(n,u.appDefinitionId)?(Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.routers.update(r,{prefix:a,config:p})})),t()):o()}))},getByPage:function(e,n,t,o){var r=o.pageRef,a=e.routers.getRouterRef.byPage(r);if(!a)return a;var p=e.routers.get.byRef(a);return p&&Object(i.isOperationAllowedInContext)(n,p.appDefinitionId)?a:void 0},getByPrefix:A,isValidPrefix:function(e,n,t,o){var r=o.prefix,i=o.applicationId,p=Object(a.resolveOption)(n,{applicationId:i},"applicationId",{isRequired:!0});return e.routers.isValidPrefix(p,r)},getCurrentDynamicRouting:function(e){var n=e.routers.getCurrentInnerRoute();if(n.isDynamic){var t=e.routers.get.byId(n.routerId);return n.prefix=t.prefix,n}return null},pages:{add:function(e,n,t,o){var r=o.routerRef,a=o.pageTitle,p=o.pageRoles;return new Promise((function(t){var o=e.routers.get.byRef(r);o&&Object(i.isOperationAllowedInContext)(n,o.appDefinitionId)||t(),t(Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.add(r,a,p)})))}))},delete:function(e,n,t,o){var r=o.routerRef,a=o.pageRef;return new Promise((function(t,o){var p=e.routers.get.byRef(r);p&&Object(i.isOperationAllowedInContext)(n,p.appDefinitionId)?(Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.pages.remove(a.id)})),t()):o()}))},connect:function(e,n,t,o){var r=o.routerRef,a=o.pageRef,p=o.pageRoles,u=e.routers.get.byRef(r);u&&Object(i.isOperationAllowedInContext)(n,u.appDefinitionId)&&Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.connect(r,a,p)}))},disconnect:function(e,n,t,o){var r=o.routerRef,a=o.pageRef,p=e.routers.get.byRef(r);p&&Object(i.isOperationAllowedInContext)(n,p.appDefinitionId)&&Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.disconnect(r,a)}))},move:function(e,n,t,o){var r=o.fromRouterRef,a=o.toRouterRef,p=o.pageRef,u=e.routers.get.byRef(r),c=e.routers.get.byRef(a);u&&c&&Object(i.isOperationAllowedInContext)(n,c.appDefinitionId)&&Object(i.isOperationAllowedInContext)(n,u.appDefinitionId)&&Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.move(p,r,a)}))},listConnectablePages:function(e){return e.routers.pages.listConnectablePages()}}};var S={getFooter:function(e){return e.siteSegments.getFooter()},getHeader:function(e){return e.siteSegments.getHeader()},getPagesContainer:function(e){return e.siteSegments.getPagesContainer()},getSiteStructure:function(e){return e.siteSegments.getSiteStructure()}};var N={getCustomNoPermissionsPageId:function(e){return e.siteMembers.getCustomNoPermissionsPageId()},setCustomNoPermissionsPageId:function(e,n,t,o){return e.siteMembers.setCustomNoPermissionsPageId(o)}};var F={styles:{getAll:function(e){return e.theme.styles.getAll()}},colors:{getAll:function(e){return e.theme.colors.getAll()}},fonts:{getMap:function(e){return e.theme.fonts.getMap()}}},M=function(e,n){var t=e.components.data.get(n)||{},o=t.appDefinitionId,r=t.applicationId;return o||r};function L(e,n,t,o){return new Promise((function(t,a){var p=r.a.clone(o);r.a.get(o,"appDefinitionId")?e.tpa.app.isInstalled(o.appDefinitionId)?a(new Error("Application already installed.")):e.tpa.appMarket.getDataAsync(o.appDefinitionId).then((function(u){u&&!u.error?"Wix"===u.by?(p.callback=function(i){if(i.onError)a(new Error(i.onError));else if(n=e.tpa.app.getDataByAppDefId(o.appDefinitionId),i.page){var p=e.pages.data.get(i.page.id);t({instanceId:r.a.get(n,"instanceId"),pageRef:i.page,pageUriSEO:r.a.get(p,"pageUriSEO"),title:r.a.get(p,"title")})}else t({instanceId:r.a.get(n,"instanceId")})},Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.add(o.appDefinitionId,p)}))):a(new Error("Can't add a non Wix application")):a(new Error("Application with ".concat(o.appDefinitionId," appDefinitionId do not exist.")))})):a(new Error("options must contain appDefinitionId"))}))}var _=function(e,n){return function(t){t.error?n(new Error(t.error.message)):e(t)}};var G={isAppSectionInstalled:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.sectionId,p=o.appDefinitionId;return new Promise((function(t,o){if(i){var u=n.applicationId;if(!Object(a.isExtensionContext)(n)||p){if(p){var c=e.tpa.app.getDataByAppDefId(p);u=r.a.get(c,"applicationId")}t(e.tpa.section.isSectionInstalledByTpaPageId(u,i))}else o(new Error("options must contain appDefinitionId"))}else o(new Error("options must contain sectionId"))}))},isApplicationInstalled:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.appDefinitionId;return new Promise((function(n,t){r?n(e.tpa.app.isInstalled(r)):t(new Error("options must contain appDefinitionId"))}))},setStyleParams:function(e,n,t,o){return new Promise((function(t,a){if(o&&o.compRef)if(o&&o.styleParams&&r.a.isArray(o.styleParams)){var p=M(e,o.compRef);p?Object(i.isOperationAllowedInContext)(n,p)?Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.style.setStyleParam(o.compRef.id,o.styleParams,(function(){return t()}))})):a("It is not allowed to set style params for other applications, application ".concat(n.appDefinitionId," cannot set applications ").concat(p," components style params")):a("could not find component data for the given component ref")}else a("options must include styleParams property and styleParams must be an array");else a("options must include compRef property")}))},getStyleParams:function(e,n,t,o){return new Promise((function(t,r){if(o&&o.compRef){var a=M(e,o.compRef);if(a)if(Object(i.isOperationAllowedInContext)(n,a))t((e.tpa.style.get(o.compRef.id)||{}).style);else r("It is not allowed to get the style params from other applications, application ".concat(n.appDefinitionId," cannot get applications ").concat(a," components style params"));else r("could not find component data for the given component ref")}else r("options must include compRef property")}))},getSiteTextPresets:function(e,n,t,o){if(!o||!o.compRef)throw new Error("options must include compRef property");return e.tpa.style.get(o.compRef.id).siteTextPresets},getSiteColors:function(e,n,t,o){if(!o||!o.compRef)throw new Error("options must include compRef property");return e.tpa.style.get(o.compRef.id).siteColors},data:{getAll:function(e,n,t,o){return new Promise((function(n,t){if(o&&o.compRef){var r=(e.components.data.get(o.compRef,null,!0)||{}).applicationId;void 0!==r?e.tpa.data.getPublicData(r,o.compRef,_(n,t)):t(new Error("could not find component data for the given component ref"))}else t(new Error("options must include compRef property"))}))},set:function(e,n,t,o){return new Promise((function(t,r){if(o&&o.compRef)if(o.key){var a=M(e,o.compRef);a?Object(i.isOperationAllowedInContext)(n,a)?Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.data.set(o.compRef,o.key,o.value,o.scope||"COMPONENT",_(t,r))})):r(new Error("it is not allowed to set the public data from other applications, application ".concat(n.appDefinitionId," cannot set applications ").concat(a," public data"))):r(new Error("could not find component data for the given component ref"))}else r(new Error("options must include key property"));else r(new Error("options must include compRef property"))}))},remove:function(e,n,t,o){return new Promise((function(t,r){if(o&&o.compRef)if(o.key){var a=M(e,o.compRef);a?Object(i.isOperationAllowedInContext)(n,a)?Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.data.remove(o.compRef,o.key,o.scope||"COMPONENT",_(t,r))})):r(new Error("it is not allowed to remove the public data from other applications, application ".concat(n.appDefinitionId," cannot remove applications ").concat(a," public data"))):r(new Error("could not find component data for the given component ref"))}else r(new Error("options must include key property"));else r(new Error("options must include compRef property"))}))}},add:{application:L,component:function(e,n,t,o){return new Promise((function(t,p){var u=r.a.clone(o);if(r.a.get(o,"componentType")){if(!o.appDefinitionId){if(Object(a.isExtensionContext)(n))return void p(new Error("options must contain appDefinitionId"));u.appDefinitionId=n.appDefinitionId}if("WIDGET"===o.componentType){if(!r.a.isObject(o.widget))return void p(new Error("options must contain a widget object"));u.widget.tpaWidgetId=o.widget.widgetId}else if("PAGE"===o.componentType){if(!r.a.isObject(o.page))return void p(new Error("options must contain a page object"));if(o.page.isHidden&&!r.a.isBoolean(o.page.isHidden))return void p(new Error("isHidden param should be of type boolean"))}u.callback=function(n){if(n.onError)p(new Error(n.onError));else if("WIDGET"===o.componentType)t({compId:n.comp.id});else{var i=e.pages.data.get(n.page.id);t({compId:n.sectionId,pageRef:n.page,pageUriSEO:r.a.get(i,"pageUriSEO"),title:r.a.get(i,"title")})}},Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.comp.add(u)}))}else p(new Error("options must contain componentType"))}))}},app:{getDataByAppDefId:function(e,n,t,o){return e.tpa.app.getDataByAppDefId(o)},getAllCompsByApplicationId:function(e,n,t,o){return e.tpa.app.getAllCompsByApplicationId(o)},refreshApp:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.applicationId,r=Object(a.resolveOption)(n,{applicationId:o},"applicationId",{isRequired:!0}),p=e.tpa.app.getAllCompsByApplicationId(r);return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.refreshApp(p)}))},delete:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.applicationId;return new Promise((function(t){var r=Object(a.resolveOption)(n,{applicationId:o},"applicationId",{isRequired:!0});Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.delete(r)})),e.waitForChangesApplied(t)}))},add:L}};function k(e){return{name:e.name,fullPath:e.location,isDirectory:e.directory}}var B={listChildren:function(e,n,t,o){var i=e.wixCode.fileSystem,a=i.getVirtualDescriptor(o.path,!0);return i.getChildren(a).then((function(e){return r.a.map(e,k)}))},readFile:function(e,n,t,o){var r=e.wixCode.fileSystem,i=r.getVirtualDescriptor(o.path,!1);return r.readFile(i)},writeFile:function(e,n,t,o){var r=e.wixCode.fileSystem,a=r.getVirtualDescriptor(o.path,!1);return Object(i.runInContext)(n.appDefinitionId,e,(function(){return r.writeFile(a,o.content)}))},deleteFile:function(e,n,t,o){var r=e.wixCode.fileSystem,a=r.getVirtualDescriptor(o.path,!1);return Object(i.runInContext)(n.appDefinitionId,e,(function(){return r.deleteItem(a)}))},flush:function(e,n){return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.wixCode.fileSystem.flush()}))},getViewerInfo:function(e){return e.wixCode.fileSystem.getViewerInfo()}};var W={hiddenComponents:{show:function(e,n,t,o){var r=o.componentRef,a=e.pages.getFocusedPageId();Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.mobile.hiddenComponents.show(r.id,a)}))}}},q=t(6),U=t.n(q);var V={getSkipToContent:function(e){return e.accessibility.skipToContent.get()},setSkipToContent:function(e,n,t,o){return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.skipToContent.set(o)}))},getVisualFocus:function(e){return e.accessibility.visualFocus.get()},setVisualFocus:function(e,n,t,o){return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.visualFocus.set(o)}))},getAutoDomReorder:function(e){return e.accessibility.autoDomReorder.get()},setAutoDomReorder:function(e,n,t,o){return Object(i.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.autoDomReorder.set(o)}))}};var H={isCoBranded:function(e){return e.account.isCoBranded()}},z=t(4);var X={registerToErrorThrownForContext:function(e,n){var t=z.REGISTER_ERROR+n.appDefinitionId;e.platform.requestAPIFromWorker(t).then((function(t){var o=t.callback;return e.registerToErrorThrownForContext(n.appDefinitionId,o)}))},unRegisterToErrorThrownForContext:function(e,n){var t=z.REGISTER_ERROR+n.appDefinitionId;e.platform.requestAPIFromWorker(t).then((function(t){var o=t.callback;return e.unRegisterToErrorThrownForContext(n.appDefinitionId,o)}))}};var K={migrate:{convertAppPage:function(e,n,t,o){var r=o.pageRef;return e.wixapps.migrate.convertAppPage(r)}}};var Y={screen:{getScreenResolution:function(e){return e.env.screen.getResolution()}}};function Z(){return(Z=O()(C.a.mark((function e(n,t,o,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.transactions.runAndWaitForApproval(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $={runAndWaitForApproval:function(e,n,t,o){return Z.apply(this,arguments)}};function J(e){return new Promise((function(n,t){e.save((function(){return n()}),(function(e){return t(e)}))}))}function Q(e,n){return e.initAutosave(n)}}])}));
//# sourceMappingURL=platform-api.min.js.map